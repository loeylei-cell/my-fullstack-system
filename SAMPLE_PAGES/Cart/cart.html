<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Cart | Old Goods Thrift</title>
  <link rel="stylesheet" href="cart.css">
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="header-left">
      <img src="../../OMS-REACT/public/Shop Icon.jpg" alt="Logo" class="logo">
      <h2>Old Goods Thrift</h2>
    </div>
    <a href="../Shopping_Window/shopping.html" class="back-link">Back to Shop</a>
  </header>

  <!-- MAIN CART SECTION -->
  <main class="cart-container">
    <h2>My Shopping Cart</h2>

    <form class="cart-content" id="cartForm">
      <!-- LEFT SIDE - ITEMS -->
      <div class="cart-items">

        <!-- Example Item 1 -->
        <div class="cart-item" data-id="1" data-price="350">
          <input type="checkbox" class="select-item">
          <img src="../Shopping_Window/p7.jpg" alt="Product Image">
          <div class="item-details">
            <h3>Classic Stripe Polo</h3>
            <p>Almost New</p>
            <p class="price">₱110.00</p>
          </div>
          <div class="item-actions">
            <input type="number" value="1" min="1" class="item-qty">
            <button type="button" class="remove-btn">Remove</button>
          </div>
        </div>

        <!-- Example Item 2 -->
        <div class="cart-item" data-id="2" data-price="250">
          <input type="checkbox" class="select-item">
          <img src="../Shopping_Window/p2.jpg" alt="Product Image">
          <div class="item-details">
            <h3>Checkmate Polo</h3>
            <p>Like New</p>
            <p class="price">₱120.00</p>
          </div>
          <div class="item-actions">
            <input type="number" value="1" min="1" class="item-qty">
            <button type="button" class="remove-btn">Remove</button>
          </div>
        </div>

      </div>

      <!-- RIGHT SIDE - SUMMARY -->
      <aside class="cart-summary">
        <h3>Order Summary</h3>
        <div class="summary-item">
          <span>Subtotal</span>
          <span id="subtotal">₱0.00</span>
        </div>
        <div class="summary-item">
          <span>Shipping Fee</span>
          <span id="shipping">₱0.00</span>
        </div>
        <div class="summary-total">
          <span>Total</span>
          <span id="total">₱0.00</span>
        </div>
        <button type="submit" class="checkout-btn" disabled><a href="../Checkout/checkout.html"> </a>Proceed to Checkout</button>
      </aside>
    </form>
  </main>

  <script>
    // ====== CART DYNAMIC UPDATES ======
    const checkboxes = document.querySelectorAll('.select-item');
    const qtyInputs = document.querySelectorAll('.item-qty');
    const checkoutBtn = document.querySelector('.checkout-btn');
    const subtotalEl = document.getElementById('subtotal');
    const shippingEl = document.getElementById('shipping');
    const totalEl = document.getElementById('total');

    const SHIPPING_FEE = 50; // You can make this dynamic later

    // Function to recalculate totals
    function updateSummary() {
      let subtotal = 0;
      let checkedCount = 0;

      document.querySelectorAll('.cart-item').forEach(item => {
        const checkbox = item.querySelector('.select-item');
        const qty = parseInt(item.querySelector('.item-qty').value);
        const price = parseFloat(item.dataset.price);

        if (checkbox.checked) {
          subtotal += price * qty;
          checkedCount++;
        }
      });

      // Update display
      subtotalEl.textContent = `₱${subtotal.toFixed(2)}`;
      shippingEl.textContent = checkedCount > 0 ? `₱${SHIPPING_FEE.toFixed(2)}` : `₱0.00`;
      totalEl.textContent = `₱${checkedCount > 0 ? (subtotal + SHIPPING_FEE).toFixed(2) : 0.00}`;

      // Enable or disable checkout button
      checkoutBtn.disabled = checkedCount === 0;
    }

    // Add listeners for checkboxes and quantity changes
    checkboxes.forEach(cb => cb.addEventListener('change', updateSummary));
    qtyInputs.forEach(input => input.addEventListener('input', updateSummary));

    // Remove button logic
    document.querySelectorAll('.remove-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.target.closest('.cart-item').remove();
        updateSummary();
      });
    });

    // Initialize summary
    updateSummary();
  </script>

</body>
</html>
